<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= action === 'create' ? 'Create' : 'Edit' %> Plan - LegacyKeeper</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <%- include('../partials/navbar') %>

  <div class="container">
    <div class="form-container">
      <h2 class="card-title"><%= action === 'create' ? 'Create New Plan' : 'Edit Plan' %></h2>

      <form action="<%= action === 'create' ? '/subscription-plans' : '/subscription-plans/' + plan.UniqueId + '?_method=PUT' %>" method="POST">
        <div class="form-group">
          <label for="SubscriptionLevel">Subscription Level</label>
          <input type="text" id="SubscriptionLevel" name="SubscriptionLevel" class="form-control" value="<%= plan ? plan.SubscriptionLevel : '' %>" required placeholder="Free, Basic, Premium, Enterprise">
        </div>

        <div class="form-group">
          <label for="PriceMonthly">Monthly Price ($)</label>
          <input type="number" step="0.01" id="PriceMonthly" name="PriceMonthly" class="form-control" value="<%= plan ? plan.PriceMonthly : '' %>" required>
        </div>

        <div class="form-group">
          <label for="PriceAnnual">Annual Price ($)</label>
          <input type="number" step="0.01" id="PriceAnnual" name="PriceAnnual" class="form-control" value="<%= plan ? plan.PriceAnnual : '' %>" required>
        </div>

        <div class="form-group">
          <label for="StorageLimitGB">Storage Limit (GB)</label>
          <input type="number" id="StorageLimitGB" name="StorageLimitGB" class="form-control" value="<%= plan ? plan.StorageLimitGB : '' %>" required>
        </div>

        <div class="form-group">
          <label for="WorkUnitLimit">Work Unit Limit</label>
          <input type="number" id="WorkUnitLimit" name="WorkUnitLimit" class="form-control" value="<%= plan ? plan.WorkUnitLimit : '' %>" required>
        </div>

        <div class="form-group">
          <label for="FeatureList">Feature List (comma-separated)</label>
          <textarea id="FeatureList" name="FeatureList" class="form-control" rows="4"><%= plan && plan.FeatureList ? plan.FeatureList.join(', ') : '' %></textarea>
          <small style="color: var(--text-secondary);">Example: Unlimited contacts, 50GB storage, Priority support</small>
        </div>

        <div style="display: flex; gap: 1rem;">
          <button type="submit" class="btn btn-primary"><%= action === 'create' ? 'Create' : 'Update' %> Plan</button>
          <a href="/subscription-plans" class="btn btn-secondary">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
